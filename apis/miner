os.loadAPI("/apis/utils")
os.loadAPI("/apis/cclog")
os.loadAPI("/apis/drone")

local logger = cclog.Logger("Miner")

-- Navigator interface --
navigator = {}
function navigator.hasHome() error("hasHome must be implemented") end
function navigator.isHome() error("isHome must be implemented")end
function navigator.findHome() error("findHome must be implemented")end
function navigator.goHome() error("goHome must be implemented")end
function navigator.getFuel() error("getFuel must be implemented")end
function navigator.distanceToHome() error("distanceToHome must be implemented") end
function navigator.getPosition() error("getPosition must be implemented") end
function navigator.getHomePosition() error("getHomePosition must be implemented") end
function navigator.clearHome() error("clearHome must be implemented") end


local state = {
       currentOrder = nil,
       queuedOrders = {},
       fuel = {level = 0, inSlot = nil}
    }

function init(navigationController)
    for field, _ in pairs(navigator) do
        if not navigationController[field] then
            error("navigator must implement field: " .. field .. " of type (" .. type(navigator[field]) .. ")")
        end
    end

    navigator = navigationController
end
